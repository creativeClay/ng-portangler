<div class="w-full max-w-full overflow-hidden">


  

      
  <div class="bg-white rounded-xl shadow-sm ring-1 ring-gray-100 p-6 space-y-6">
    <div class="flex items-center justify-between">
        <div class="flex items-center gap-3">
          <span class="inline-flex h-10 w-10 items-center justify-center rounded-lg bg-indigo-50 text-indigo-600">
            <i class="fa-solid fa-users"></i>
          </span>
          <div>
            <h2 class="text-lg font-semibold text-gray-900">Locations</h2>
            <p class="text-sm text-gray-500">Browse and manage hosts locations</p>
          </div>
        </div>
        <div class="flex items-center gap-2">
          <button (click)="toggleFilters()" class="inline-flex items-center gap-2 px-4 py-2 rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-50">
            <i class="fa-solid fa-filter"></i>
            <span>Filters</span>
          </button>
          <button (click)="createNew()" class="inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-black text-white hover:bg-gray-800">
            <i class="fa-solid fa-plus"></i>
            <span>Create New</span>
          </button>
        </div>
      </div>

    <div *ngIf="loading" class="py-6 text-center text-gray-500">Loading...</div>
    <div *ngIf="!loading && errorMessage" class="py-6 text-center text-red-600">{{ errorMessage }}</div>

    <div *ngIf="!loading && !errorMessage" class="space-y-6">
      <!-- Filters Row -->
      <div *ngIf="showFilters" class="grid grid-cols-1 md:grid-cols-4 gap-4">
        <div class="flex flex-col">
          <label class="text-xs font-medium text-gray-600 uppercase tracking-wide">Search by name</label>
          <div class="relative mt-1">
            <i class="fa-solid fa-magnifying-glass absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
            <input type="text" [(ngModel)]="searchName" (input)="onFilterChange()" placeholder="Type name..." class="w-full pl-10 pr-3 py-2.5 rounded-lg border border-gray-200 bg-white text-gray-800 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" />
          </div>
        </div>
        <div class="flex flex-col">
          <label class="text-xs font-medium text-gray-600 uppercase tracking-wide">Filter by Status</label>
          <div class="relative mt-1">
            <i class="fa-regular fa-flag absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
            <select [(ngModel)]="filterStatus" (ngModelChange)="onFilterChange()" class="w-full pl-10 pr-10 py-2.5 rounded-lg border border-gray-200 bg-white text-gray-800 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 appearance-none">
              <option value="">All</option>
              <option value="1">Active</option>
              <option value="0">Inactive</option>
            </select>
            <i class="fa-solid fa-chevron-down absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none"></i>
          </div>
        </div>
        <div class="flex flex-col">
          <label class="text-xs font-medium text-gray-600 uppercase tracking-wide">Filter by Type</label>
          <div class="relative mt-1">
            <i class="fa-solid fa-shapes absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
            <select [(ngModel)]="filterTypeId" (ngModelChange)="onFilterChange()" class="w-full pl-10 pr-10 py-2.5 rounded-lg border border-gray-200 bg-white text-gray-800 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 appearance-none">
              <option value="">All</option>
              <option *ngFor="let t of types" [value]="t.id">{{ t.name }}</option>
            </select>
            <i class="fa-solid fa-chevron-down absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none"></i>
          </div>
        </div>
        <div class="flex flex-col">
          <label class="text-xs font-medium text-gray-600 uppercase tracking-wide">Filter by Amenity</label>
          <div class="relative mt-1">
            <i class="fa-solid fa-toolbox absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
            <select [(ngModel)]="filterAmenityId" (ngModelChange)="onFilterChange()" class="w-full pl-10 pr-10 py-2.5 rounded-lg border border-gray-200 bg-white text-gray-800 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 appearance-none">
              <option value="">All</option>
              <option *ngFor="let a of amenities" [value]="a.id">{{ a.name }}</option>
            </select>
            <i class="fa-solid fa-chevron-down absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none"></i>
          </div>
        </div>
        <div class="flex flex-col">
          <label class="text-xs font-medium text-gray-600 uppercase tracking-wide">Filter by Spec</label>
          <div class="relative mt-1">
            <i class="fa-solid fa-sliders absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
            <select [(ngModel)]="filterSpecId" (ngModelChange)="onFilterChange()" class="w-full pl-10 pr-10 py-2.5 rounded-lg border border-gray-200 bg-white text-gray-800 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 appearance-none">
              <option value="">All</option>
              <option *ngFor="let s of specs" [value]="s.id">{{ s.name }}</option>
            </select>
            <i class="fa-solid fa-chevron-down absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none"></i>
          </div>
        </div>
        <div class="md:col-span-4 flex justify-end">
          <button (click)="clearFilters()" class="px-4 py-2 rounded-lg border border-gray-300 text-gray-700">Clear</button>
        </div>
      </div>

      <!-- Table -->
      <div class="overflow-x-auto rounded-lg ring-1 ring-gray-200">
      <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-50/80 backdrop-blur sticky top-0 z-10 text-left">
          <tr>
            <th (click)="setSort('id')" class="px-4 py-3 text-left text-xs font-semibold tracking-wider text-gray-600 uppercase cursor-pointer select-none">
              <span class="inline-flex items-center gap-2">
                <i class="fa-regular fa-hashtag text-gray-400"></i>
                <span>ID</span>
                <i class="fas text-gray-400" [ngClass]="{
                  'fa-sort-up': sortColumn==='id' && sortDirection==='asc',
                  'fa-sort-down': sortColumn==='id' && sortDirection==='desc',
                  'fa-sort': sortColumn!=='id'
                }"></i>
              </span>
            </th>
            <th (click)="setSort('name')" class="px-4 py-3 text-left text-xs font-semibold tracking-wider text-gray-600 uppercase cursor-pointer select-none">
              <span class="inline-flex items-center gap-2">
                <i class="fa-regular fa-id-card text-gray-400"></i>
                <span>Name</span>
                <i class="fas text-gray-400" [ngClass]="{
                  'fa-sort-up': sortColumn==='name' && sortDirection==='asc',
                  'fa-sort-down': sortColumn==='name' && sortDirection==='desc',
                  'fa-sort': sortColumn!=='name'
                }"></i>
              </span>
            </th>
            <th (click)="setSort('address')" class="px-4 py-3 text-left text-xs font-semibold tracking-wider text-gray-600 uppercase cursor-pointer select-none">
              <span class="inline-flex items-center gap-2">
                <i class="fa-solid fa-location-dot text-gray-400"></i>
                <span>Address</span>
                <i class="fas text-gray-400" [ngClass]="{
                  'fa-sort-up': sortColumn==='address' && sortDirection==='asc',
                  'fa-sort-down': sortColumn==='address' && sortDirection==='desc',
                  'fa-sort': sortColumn!=='address'
                }"></i>
              </span>
            </th>
            <th (click)="setSort('city')" class="px-4 py-3 text-left text-xs font-semibold tracking-wider text-gray-600 uppercase cursor-pointer select-none">
              <span class="inline-flex items-center gap-2">
                <i class="fa-solid fa-city text-gray-400"></i>
                <span>City</span>
                <i class="fas text-gray-400" [ngClass]="{
                  'fa-sort-up': sortColumn==='city' && sortDirection==='asc',
                  'fa-sort-down': sortColumn==='city' && sortDirection==='desc',
                  'fa-sort': sortColumn!=='city'
                }"></i>
              </span>
            </th>
            <th (click)="setSort('country')" class="px-4 py-3 text-left text-xs font-semibold tracking-wider text-gray-600 uppercase cursor-pointer select-none">
              <span class="inline-flex items-center gap-2">
                <i class="fa-solid fa-globe text-gray-400"></i>
                <span>Country</span>
                <i class="fas text-gray-400" [ngClass]="{
                  'fa-sort-up': sortColumn==='country' && sortDirection==='asc',
                  'fa-sort-down': sortColumn==='country' && sortDirection==='desc',
                  'fa-sort': sortColumn!=='country'
                }"></i>
              </span>
            </th>
            <th (click)="setSort('status')" class="px-4 py-3 text-left text-xs font-semibold tracking-wider text-gray-600 uppercase cursor-pointer select-none">
              <span class="inline-flex items-center gap-2">
                <i class="fa-regular fa-circle text-gray-400"></i>
                <span>Status</span>
                <i class="fas text-gray-400" [ngClass]="{
                  'fa-sort-up': sortColumn==='status' && sortDirection==='asc',
                  'fa-sort-down': sortColumn==='status' && sortDirection==='desc',
                  'fa-sort': sortColumn!=='status'
                }"></i>
              </span>
            </th>
            <th (click)="setSort('capacity')" class="px-4 py-3 text-left text-xs font-semibold tracking-wider text-gray-600 uppercase cursor-pointer select-none">
              <span class="inline-flex items-center gap-2">
                <i class="fa-solid fa-users text-gray-400"></i>
                <span>Capacity</span>
                <i class="fas text-gray-400" [ngClass]="{
                  'fa-sort-up': sortColumn==='capacity' && sortDirection==='asc',
                  'fa-sort-down': sortColumn==='capacity' && sortDirection==='desc',
                  'fa-sort': sortColumn!=='capacity'
                }"></i>
              </span>
            </th>
            <th (click)="setSort('created_on')" class="px-4 py-3 text-left text-xs font-semibold tracking-wider text-gray-600 uppercase cursor-pointer select-none">
              <span class="inline-flex items-center gap-2">
                <i class="fa-regular fa-clock text-gray-400"></i>
                <span>Created On</span>
                <i class="fas text-gray-400" [ngClass]="{
                  'fa-sort-up': sortColumn==='created_on' && sortDirection==='asc',
                  'fa-sort-down': sortColumn==='created_on' && sortDirection==='desc',
                  'fa-sort': sortColumn!=='created_on'
                }"></i>
              </span>
            </th>
            
          </tr>
        </thead>
        <tbody class="divide-y divide-gray-100">
          <tr *ngFor="let loc of locations" (click)="navigateTo(loc.id)" class="hover:bg-gray-50 transition-colors cursor-pointer">
            <td class="px-4 py-3 font-mono text-sm text-gray-800">{{ loc.id }}</td>
            <td class="px-4 py-3 text-gray-900">{{ loc.name }}</td>
            <td class="px-4 py-3 text-gray-700">{{ loc.address }}</td>
            <td class="px-4 py-3 text-gray-700">{{ loc.city }}</td>
            <td class="px-4 py-3 text-gray-700">{{ loc.country }}</td>
            <td class="px-4 py-3">
              <span class="inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium" [ngClass]="+loc.status === 1 ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-700'">
                <i class="fa-solid" [ngClass]="+loc.status === 1 ? 'fa-circle-check' : 'fa-circle' "></i>
                {{ getStatusLabel(loc.status) }}
              </span>
            </td>
            <td class="px-4 py-3 text-gray-700">{{ loc.capacity }}</td>
            <td class="px-4 py-3 whitespace-nowrap text-gray-700">{{ loc.created_on | date: 'yyyy-MM-dd' }}</td>
           
          </tr>
          <tr *ngIf="locations.length === 0">
            <td colspan="8" class="px-6 py-12 text-center">
              <div class="flex flex-col items-center gap-2 text-gray-500">
                <i class="fa-regular fa-folder-open text-3xl"></i>
                <p class="text-sm">No locations found</p>
              </div>
            </td>
          </tr>

        </tbody>
      </table>
      </div>
    </div>
  </div>
</div>
